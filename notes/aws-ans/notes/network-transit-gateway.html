<!DOCTYPE html>
<html lang="en-US">

<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">

	<!-- Open Graph / Facebook -->
	<meta property="og:type" content="website">
	<meta property="og:locale" content="en_US">
	<meta property="og:url" content="https://christoferson.github.io/">
	<meta property="og:site_name" content="christoferson.github.io">
	<meta property="og:title" content="Meta Tags Preview, Edit and Generate">
	<meta property="og:description" content="Christoferson Chua GitHub Page">

	<!-- Twitter -->
	<meta property="twitter:card" content="summary_large_image">
	<meta property="twitter:url" content="https://christoferson.github.io/">
	<meta property="twitter:title" content="christoferson.github.io">
	<meta property="twitter:description" content="Christoferson Chua GitHub Page">

	<script type="application/ld+json">{
		"name": "christoferson.github.io",
		"description": "Machine Learning",
		"url": "https://christoferson.github.io/",
		"@type": "WebSite",
		"headline": "christoferson.github.io",
		"@context": "https://schema.org"
	}</script>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" />
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>

	<title>Christoferson Chua</title>
	<meta name="title" content="Christoferson Chua | GitHub Page | Machine Learning">
	<meta name="description" content="Christoferson Chua GitHub Page - Machine Learning">
	<meta name="keywords" content="Backend,Java,Spring,Aws,Python,Machine Learning">

	<link rel="stylesheet" href="style.css">

</head>
<body>

	<div class="container-fluid p-5 bg-primary text-white text-center">
		<h1>AWS Certified Advanced Networking - Specialty (ANS-C01)</h1>
        <p>Transit Gateway</p>
	</div>

    <div class="container mt-5">
        <p style="color: blueviolet; font-size: 20px;"><strong>AWS Transit Gateway - Core Concepts</strong></p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Introduction</strong></p>
        <ul>
            <li><strong>Definition:</strong>
                <ul>
                    <li>Network transit hub for interconnecting VPCs and on-premises networks</li>
                    <li>Supports global infrastructure through inter-Region peering</li>
                    <li>Automatic encryption of inter-datacenter traffic at physical layer</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Key Components</strong></p>
        <ul>
            <li><strong>Attachments Types:</strong>
                <ul>
                    <li>VPC attachments</li>
                    <li>Connect SD-WAN/third-party appliances</li>
                    <li>AWS Direct Connect gateway</li>
                    <li>Transit gateway peering connections</li>
                    <li>VPN connections</li>
                </ul>
            </li>
            <li><strong>MTU Specifications:</strong>
                <ul>
                    <li>8500 bytes: VPC, Direct Connect, Transit Gateway Connect, peering</li>
                    <li>1500 bytes: VPN connections</li>
                </ul>
            </li>
            <li><strong>Route Management:</strong>
                <ul>
                    <li>Default route table with optional additional tables</li>
                    <li>Dynamic and static route support</li>
                    <li>One-to-one attachment to route table association</li>
                    <li>Multiple attachments can share one route table</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Route Propagation</strong></p>
        <ul>
            <li><strong>Dynamic Route Propagation:</strong>
                <ul>
                    <li>VPC: Requires static routes</li>
                    <li>VPN: Uses BGP for route propagation</li>
                    <li>Direct Connect: Uses BGP for allowed prefixes</li>
                    <li>Connect attachment: Automatic route propagation</li>
                    <li>Peering: Requires static routes</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Important Limitations</strong></p>
        <ul>
            <li><strong>Critical Constraints:</strong>
                <ul>
                    <li>Each attachment associates with exactly one route table</li>
                    <li>VPCs require static routes to transit gateway</li>
                    <li>Different MTU limits for VPN vs other connections</li>
                    <li>Peering requires manual static route configuration</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Exam Tips</strong></p>
        <ul>
            <li><strong>Key Concepts to Remember:</strong>
                <ul>
                    <li>Central hub for network connectivity</li>
                    <li>Different attachment types serve different purposes</li>
                    <li>Route propagation varies by attachment type</li>
                    <li>MTU differences between connection types</li>
                </ul>
            </li>
            <li><strong>Common Scenarios:</strong>
                <ul>
                    <li>VPC interconnectivity</li>
                    <li>Hybrid network architecture</li>
                    <li>Global network design</li>
                    <li>Route management strategies</li>
                </ul>
            </li>
        </ul>
    </div>

    <div class="container mt-5">
        <p style="color: blueviolet; font-size: 20px;"><strong>AWS Transit Gateway - Appliance Mode and Shared Services VPC</strong></p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Appliance Mode Overview</strong></p>
        <ul>
            <li><strong>Purpose:</strong>
                <ul>
                    <li>Enables centralized inspection of traffic between attachments</li>
                    <li>Ensures symmetric routing through security appliances</li>
                    <li>Maintains flow stickiness to specific network interfaces</li>
                </ul>
            </li>
            <li><strong>Flow Management:</strong>
                <ul>
                    <li>Uses flow hash algorithm to select network interface</li>
                    <li>Maintains same interface for return traffic</li>
                    <li>Ensures bidirectional traffic through same AZ</li>
                    <li>Maintains session affinity per transit gateway</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Critical Limitations</strong></p>
        <ul>
            <li><strong>Single Transit Gateway Requirement:</strong>
                <ul>
                    <li>Must use exactly one transit gateway per appliance VPC</li>
                    <li>Multiple transit gateways do not share flow state</li>
                    <li>Cannot guarantee flow stickiness with multiple gateways</li>
                </ul>
            </li>
            <li><strong>Traffic Flow Restrictions:</strong>
                <ul>
                    <li>Source and destination must use same transit gateway attachment</li>
                    <li>Traffic may drop if using different gateway types (e.g., Internet Gateway)</li>
                    <li>Enabling on existing attachment may affect current routes</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Behavior Patterns</strong></p>
        <ul>
            <li><strong>Without Appliance Mode:</strong>
                <ul>
                    <li>Traffic stays in originating AZ</li>
                    <li>Cross-AZ routing only occurs for:
                        <ul>
                            <li>AZ failures</li>
                            <li>Missing subnet in target AZ</li>
                        </ul>
                    </li>
                    <li>Can lead to asymmetric routing and dropped traffic</li>
                </ul>
            </li>
            <li><strong>With Appliance Mode:</strong>
                <ul>
                    <li>Maintains flow through same AZ</li>
                    <li>Ensures stateful inspection capability</li>
                    <li>Supports high availability with appliances in each AZ</li>
                    <li>Enables symmetric routing patterns</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Implementation Considerations</strong></p>
        <ul>
            <li><strong>High Availability Design:</strong>
                <ul>
                    <li>Deploy appliances in multiple AZs</li>
                    <li>Use separate subnets for transit gateway attachments</li>
                    <li>Configure appropriate routing tables per subnet</li>
                </ul>
            </li>
            <li><strong>Route Management:</strong>
                <ul>
                    <li>Separate route tables for appliance VPC</li>
                    <li>Different routing needs for transit gateway attachment subnets</li>
                    <li>Specific routes for appliance communication</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Exam Tips</strong></p>
        <ul>
            <li><strong>Key Points:</strong>
                <ul>
                    <li>One transit gateway per appliance VPC requirement</li>
                    <li>Flow stickiness guarantees with proper configuration</li>
                    <li>Symmetric routing requirements for stateful inspection</li>
                    <li>Impact of enabling/disabling appliance mode</li>
                </ul>
            </li>
            <li><strong>Common Scenarios:</strong>
                <ul>
                    <li>Centralized security inspection</li>
                    <li>Stateful firewall deployment</li>
                    <li>Multi-AZ high availability design</li>
                    <li>Traffic flow troubleshooting</li>
                </ul>
            </li>
            <li><strong>Remember:</strong>
                <ul>
                    <li>Traffic patterns differ with and without appliance mode</li>
                    <li>AZ affinity impacts routing decisions</li>
                    <li>Gateway attachment limitations</li>
                    <li>Route table configuration importance</li>
                </ul>
            </li>
        </ul>
    </div>

    <div class="container mt-5">
        <p style="color: blueviolet; font-size: 20px;"><strong>AWS Transit Gateway - Design Best Practices</strong></p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Subnet Design</strong></p>
        <ul>
            <li><strong>Transit Gateway Attachment Subnets:</strong>
                <ul>
                    <li>Use separate subnet for each TGW attachment</li>
                    <li>Implement small CIDR blocks (e.g., /28)</li>
                    <li>Preserves IP addresses for EC2 resources</li>
                </ul>
            </li>
            <li><strong>Network ACL Configuration:</strong>
                <ul>
                    <li>Keep TGW subnet ACLs open (inbound/outbound)</li>
                    <li>Apply restrictive ACLs to workload subnets instead</li>
                    <li>Use single ACL for all TGW-associated subnets</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Route Table Management</strong></p>
        <ul>
            <li><strong>Best Practices:</strong>
                <ul>
                    <li>Use same route table for all TGW-associated subnets</li>
                    <li>Exception: Middle-box VPCs requiring multiple NAT gateways</li>
                    <li>Limit number of transit gateway route tables</li>
                    <li>Enable route propagation for:
                        <ul>
                            <li>Direct Connect gateway attachments</li>
                            <li>BGP Site-to-Site VPN attachments</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Connectivity Design</strong></p>
        <ul>
            <li><strong>VPN Connections:</strong>
                <ul>
                    <li>Prefer BGP Site-to-Site VPN connections</li>
                    <li>Enable multipath if customer gateway supports it</li>
                </ul>
            </li>
            <li><strong>Migration Considerations:</strong>
                <ul>
                    <li>VPC peering to TGW migration:
                        <ul>
                            <li>Be aware of MTU size mismatches</li>
                            <li>Update both VPCs simultaneously</li>
                            <li>Prevent jumbo packet drops</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>High Availability and Redundancy</strong></p>
        <ul>
            <li><strong>Key Design Points:</strong>
                <ul>
                    <li>TGW inherently highly available</li>
                    <li>Additional TGWs not needed for HA</li>
                    <li>Use single TGW per Region for disaster recovery</li>
                </ul>
            </li>
            <li><strong>Multi-Gateway Deployments:</strong>
                <ul>
                    <li>Use unique ASN for each transit gateway</li>
                    <li>Consider inter-Region peering</li>
                    <li>Enables global network architecture</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Important Limitations</strong></p>
        <ul>
            <li><strong>Design Constraints:</strong>
                <ul>
                    <li>Cannot mix MTU sizes during migration</li>
                    <li>Route table proliferation impacts management</li>
                    <li>ASN must be unique per transit gateway</li>
                    <li>Subnet size affects available IP addresses</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Exam Tips</strong></p>
        <ul>
            <li><strong>Remember:</strong>
                <ul>
                    <li>Separate subnets for TGW attachments</li>
                    <li>Open ACLs for TGW subnets</li>
                    <li>Single route table unless specifically needed</li>
                    <li>BGP preferred for VPN connections</li>
                </ul>
            </li>
            <li><strong>Design Principles:</strong>
                <ul>
                    <li>Simplicity in route table design</li>
                    <li>Proper subnet sizing (/28)</li>
                    <li>Built-in high availability</li>
                    <li>Regional disaster recovery approach</li>
                </ul>
            </li>
            <li><strong>Common Scenarios:</strong>
                <ul>
                    <li>Network migration planning</li>
                    <li>Global network design</li>
                    <li>High availability architecture</li>
                    <li>Subnet and routing strategy</li>
                </ul>
            </li>
        </ul>
    </div>

    <div class="container mt-5">
        <p style="color: blueviolet; font-size: 20px;"><strong>Transit Gateway Pattern: Centralized Router</strong></p>
    
        <p>You can configure your transit gateway as a centralized router that connects all of your VPCs, AWS Direct Connect, and Site-to-Site VPN connections. In this scenario, all attachments are associated with the transit gateway default route table and propagate to the transit gateway default route table. Therefore, all attachments can route packets to each other, with the transit gateway serving as a simple layer 3 IP router.</p>

        <p style="color: #0066cc; font-size: 16px;"><strong>Pattern Overview</strong></p>
        <ul>
            <li><strong>Centralized Router Pattern:</strong>
                <ul>
                    <li>Functions as a simple layer 3 IP router</li>
                    <li>Connects all network types:
                        <ul>
                            <li>VPCs</li>
                            <li>AWS Direct Connect</li>
                            <li>Site-to-Site VPN connections</li>
                        </ul>
                    </li>
                    <li>Routing Configuration:
                        <ul>
                            <li>All attachments associate with default route table</li>
                            <li>All attachments propagate to default route table</li>
                            <li>Full mesh routing between all attachments</li>
                            <li>No routing restrictions or isolation</li>
                        </ul>
                    </li>
                    <li>Result:
                        <ul>
                            <li>Any attachment can route to any other attachment</li>
                            <li>Simplified routing architecture</li>
                            <li>Single routing domain for all networks</li>
                            <li>Automatic route propagation between all points</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
        <ul>
            <li><strong>Purpose:</strong>
                <ul>
                    <li>Single routing domain for all VPCs</li>
                    <li>Full connectivity between all attached networks</li>
                    <li>Simplified routing management</li>
                </ul>
            </li>
            <li><strong>Common Use Cases:</strong>
                <ul>
                    <li>Shared services architecture</li>
                    <li>Multi-VPC applications</li>
                    <li>Consolidated on-premises connectivity</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Architecture Components</strong></p>
        <ul>
            <li><strong>Transit Gateway Configuration:</strong>
                <ul>
                    <li>Single route table</li>
                    <li>All attachments associated with main route table</li>
                    <li>Auto-accept shared attachments: Yes</li>
                    <li>Default route table association: Yes</li>
                    <li>Default route table propagation: Yes</li>
                </ul>
            </li>
        </ul>

        <figure style="width:100%;">
            <img src="img/tgw-example-centralized-router.png" style="width:42%;border: 2px solid lightcoral;" alt="VPC Ingress Routing Architecture"/>
            <figcaption style="width:42%;text-align: center; font-size: 14px; color: gray;">Figure: Centralized Router</figcaption>
        </figure>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Route Tables</strong></p>
        <ul>
            <li><strong>Transit Gateway Route Table:</strong>
                <ul>
                    <li>Example entries:
    <pre>
    Destination     Target                  Type
    10.1.0.0/16    VPC-A-Attachment       propagated
    10.2.0.0/16    VPC-B-Attachment       propagated
    10.3.0.0/16    VPC-C-Attachment       propagated
    172.16.0.0/16  VPN-Attachment         propagated
    </pre>
                    </li>
                </ul>
            </li>
            <li><strong>VPC Route Tables:</strong>
                <ul>
                    <li>VPC-A (10.1.0.0/16):
    <pre>
    Destination     Target
    10.1.0.0/16    local
    0.0.0.0/0      tgw-id
    </pre>
                    </li>
                    <li>VPC-B (10.2.0.0/16):
    <pre>
    Destination     Target
    10.2.0.0/16    local
    0.0.0.0/0      tgw-id
    </pre>
                    </li>
                </ul>
            </li>
            <li><strong>On-premises Router BGP Table:</strong>
                <ul>
                    <li>Example entries:
    <pre>
    Network         Next Hop              AS Path
    10.1.0.0/16    VPN-Tunnel-1-IP      AWS-ASN
    10.2.0.0/16    VPN-Tunnel-1-IP      AWS-ASN
    10.3.0.0/16    VPN-Tunnel-1-IP      AWS-ASN
    </pre>
                    </li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Traffic Flow Example</strong></p>
        <ul>
            <li><strong>Scenario: EC2 in VPC-A accessing EC2 in VPC-B</strong></li>
            <li><strong>Step-by-Step Flow:</strong>
                <ul>
                    <li>1. Source EC2 (10.1.1.10) sends packet to destination (10.2.1.20)</li>
                    <li>2. VPC-A route table matches 0.0.0.0/0 → sends to TGW</li>
                    <li>3. TGW route table matches 10.2.0.0/16 → forwards to VPC-B attachment</li>
                    <li>4. Packet arrives at VPC-B through TGW ENI</li>
                    <li>5. VPC-B route table matches local route → delivers to destination EC2</li>
                    <li>6. Return traffic follows same process in reverse</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Key Design Considerations</strong></p>
        <ul>
            <li><strong>Routing:</strong>
                <ul>
                    <li>All VPCs see all other VPC routes</li>
                    <li>On-premises sees all VPC routes</li>
                    <li>VPCs see on-premises routes</li>
                    <li>No route filtering or isolation</li>
                </ul>
            </li>
            <li><strong>Security:</strong>
                <ul>
                    <li>Security groups and NACLs still apply</li>
                    <li>Consider VPC security boundaries</li>
                    <li>Monitor cross-VPC traffic</li>
                </ul>
            </li>
            <li><strong>Scaling:</strong>
                <ul>
                    <li>Route table limits per TGW</li>
                    <li>Routes per route table limits</li>
                    <li>Attachment limits</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Exam Tips</strong></p>
        <ul>
            <li><strong>Remember:</strong>
                <ul>
                    <li>Full mesh connectivity by default</li>
                    <li>Single route table for all attachments</li>
                    <li>Route propagation enabled for all attachments</li>
                    <li>VPCs need only default route to TGW</li>
                </ul>
            </li>
            <li><strong>Common Questions:</strong>
                <ul>
                    <li>Route propagation behavior</li>
                    <li>Traffic flow patterns</li>
                    <li>Route table configurations</li>
                    <li>Connectivity between different network types</li>
                </ul>
            </li>
        </ul>
    </div>


    <div class="container mt-5">
        <p style="color: blueviolet; font-size: 20px;"><strong>Transit Gateway Pattern: Isolated VPCs</strong></p>
    
        <p>
            You can configure your transit gateway as multiple isolated routers. This is similar to using multiple transit gateways, but provides more flexibility in cases where the routes and attachments might change. In this scenario, each isolated router has a single route table. All attachments associated with an isolated router propagate and associate with its route table. Attachments associated with one isolated router can route packets to each other, but cannot route packets to or receive packets from the attachments for another isolated router.
        </p>

        <p style="color: #0066cc; font-size: 16px;"><strong>Pattern Summary</strong></p>
        <ul>
            <li><strong>Isolated VPCs Pattern:</strong>
                <ul>
                    <li>Creates network isolation between VPCs</li>
                    <li>Each VPC can connect only to on-premises network</li>
                    <li>No VPC-to-VPC communication allowed</li>
                    <li>Uses multiple route tables to enforce isolation</li>
                    <li>Common in regulated environments or multi-tenant architectures</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Architecture Components</strong></p>
        <ul>
            <li><strong>Transit Gateway Configuration:</strong>
                <ul>
                    <li>Multiple route tables (one per VPC plus one for VPN)</li>
                    <li>Auto-accept shared attachments: No</li>
                    <li>Default route table association: No</li>
                    <li>Default route table propagation: No</li>
                </ul>
            </li>
        </ul>

        <figure style="width:100%;">
            <img src="img/tgw-example-isolated-vpcs.png" style="width:42%;border: 2px solid lightcoral;" alt="VPC Ingress Routing Architecture"/>
            <figcaption style="width:42%;text-align: center; font-size: 14px; color: gray;">Figure: Isolated VPC</figcaption>
        </figure>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Route Tables</strong></p>
        <ul>
            <li><strong>Transit Gateway Route Tables:</strong>
                <ul>
                    <li>VPN Route Table:
    <pre>
    Destination     Target                  Type
    10.1.0.0/16    VPC-A-Attachment       propagated
    10.2.0.0/16    VPC-B-Attachment       propagated
    10.3.0.0/16    VPC-C-Attachment       propagated
    </pre>
                    </li>
                    <li>VPC-A Route Table:
    <pre>
    Destination     Target                  Type
    172.16.0.0/16  VPN-Attachment         propagated
    </pre>
                    </li>
                    <li>VPC-B Route Table:
    <pre>
    Destination     Target                  Type
    172.16.0.0/16  VPN-Attachment         propagated
    </pre>
                    </li>
                </ul>
            </li>
            <li><strong>VPC Route Tables:</strong>
                <ul>
                    <li>VPC-A (10.1.0.0/16):
    <pre>
    Destination     Target
    10.1.0.0/16    local
    0.0.0.0/0      tgw-id
    </pre>
                    </li>
                    <li>VPC-B (10.2.0.0/16):
    <pre>
    Destination     Target
    10.2.0.0/16    local
    0.0.0.0/0      tgw-id
    </pre>
                    </li>
                </ul>
            </li>
            <li><strong>On-premises Router BGP Table:</strong>
                <ul>
                    <li>Example entries:
    <pre>
    Network         Next Hop              AS Path
    10.1.0.0/16    VPN-Tunnel-1-IP      AWS-ASN
    10.2.0.0/16    VPN-Tunnel-1-IP      AWS-ASN
    10.3.0.0/16    VPN-Tunnel-1-IP      AWS-ASN
    </pre>
                    </li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Traffic Flow Examples</strong></p>
        <ul>
            <li><strong>Scenario 1: On-premises to VPC-A</strong>
                <ul>
                    <li>1. On-premises (172.16.1.10) sends packet to VPC-A (10.1.1.10)</li>
                    <li>2. Packet arrives at TGW through VPN attachment</li>
                    <li>3. VPN route table matches 10.1.0.0/16 → forwards to VPC-A</li>
                    <li>4. VPC-A receives packet through TGW ENI</li>
                </ul>
            </li>
            <li><strong>Scenario 2: VPC-A to VPC-B (Blocked)</strong>
                <ul>
                    <li>1. VPC-A (10.1.1.10) sends packet to VPC-B (10.2.1.10)</li>
                    <li>2. Packet arrives at TGW</li>
                    <li>3. VPC-A route table has no route to 10.2.0.0/16</li>
                    <li>4. Packet is dropped</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Key Design Considerations</strong></p>
        <ul>
            <li><strong>Route Table Design:</strong>
                <ul>
                    <li>Each VPC needs its own TGW route table</li>
                    <li>VPN attachment needs separate route table</li>
                    <li>Careful route propagation configuration required</li>
                    <li>No transitive routing between VPCs</li>
                </ul>
            </li>
            <li><strong>Security:</strong>
                <ul>
                    <li>Network isolation through route tables</li>
                    <li>Additional security through NACLs and security groups</li>
                    <li>Clear traffic boundaries</li>
                </ul>
            </li>
            <li><strong>Scaling Considerations:</strong>
                <ul>
                    <li>One route table per VPC</li>
                    <li>Route propagation management complexity</li>
                    <li>Association/propagation limits</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Exam Tips</strong></p>
        <ul>
            <li><strong>Remember:</strong>
                <ul>
                    <li>Multiple route tables required</li>
                    <li>Selective route propagation</li>
                    <li>No VPC-to-VPC communication</li>
                    <li>Only on-premises connectivity allowed</li>
                </ul>
            </li>
            <li><strong>Common Scenarios:</strong>
                <ul>
                    <li>Multi-tenant environments</li>
                    <li>Regulatory compliance requirements</li>
                    <li>Security isolation needs</li>
                    <li>Route table configuration verification</li>
                </ul>
            </li>
        </ul>
    </div>

    <div class="container mt-5">
        <p style="color: blueviolet; font-size: 20px;"><strong>Transit Gateway Pattern: Isolated VPCs with Shared Services</strong></p>
    
        <p>You can configure your transit gateway as multiple isolated routers that use a shared service. This is similar to using multiple transit gateways, but provides more flexibility in cases where the routes and attachments might change. In this scenario, each isolated router has a single route table. All attachments associated with an isolated router propagate and associate with its route table. Attachments associated with one isolated router can route packets to each other, but cannot route packets to or receive packets from the attachments for another isolated router. Attachments can route packets to or receive packets from the shared services. You can use this scenario when you have groups that need to be isolated, but use a shared service, for example a production system.</p>

        <p style="color: #0066cc; font-size: 16px;"><strong>Pattern Summary</strong></p>
        <ul>
            <li><strong>Isolated VPCs with Shared Services Pattern:</strong>
                <ul>
                    <li>Maintains isolation between VPCs</li>
                    <li>Allows access to common shared services VPC</li>
                    <li>Enables on-premises network connectivity</li>
                    <li>Uses multiple route tables with selective routing</li>
                    <li>Common in enterprise environments with centralized services (DNS, Active Directory, security services)</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Architecture Components</strong></p>
        <ul>
            <li><strong>Transit Gateway Configuration:</strong>
                <ul>
                    <li>Multiple route tables:
                        <ul>
                            <li>One for each isolated VPC</li>
                            <li>One for shared services VPC</li>
                            <li>One for on-premises connection</li>
                        </ul>
                    </li>
                    <li>Auto-accept shared attachments: No</li>
                    <li>Default route table association: No</li>
                    <li>Default route table propagation: No</li>
                </ul>
            </li>
        </ul>

        <figure style="width:100%;">
            <img src="img/transit-gateway-isolated-shared-service.png" style="width:42%;border: 2px solid lightcoral;" alt="VPC Ingress Routing Architecture"/>
            <figcaption style="width:42%;text-align: center; font-size: 14px; color: gray;">Figure: Isolated VPCs + Shared Service VPC</figcaption>
        </figure>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Route Tables</strong></p>
        <ul>
            <li><strong>Transit Gateway Route Tables:</strong>
                <ul>
                    <li>Shared Services VPC Route Table:
    <pre>
    Destination     Target                  Type
    10.1.0.0/16    VPC-A-Attachment       propagated
    10.2.0.0/16    VPC-B-Attachment       propagated
    172.16.0.0/16  VPN-Attachment         propagated
    </pre>
                    </li>
                    <li>VPC-A Route Table:
    <pre>
    Destination     Target                  Type
    172.16.0.0/16  VPN-Attachment         propagated
    10.0.0.0/16    Shared-VPC-Attachment  propagated
    </pre>
                    </li>
                    <li>VPN Route Table:
    <pre>
    Destination     Target                  Type
    10.0.0.0/16    Shared-VPC-Attachment  propagated
    10.1.0.0/16    VPC-A-Attachment       propagated
    10.2.0.0/16    VPC-B-Attachment       propagated
    </pre>
                    </li>
                </ul>
            </li>
            <li><strong>VPC Route Tables:</strong>
                <ul>
                    <li>Shared Services VPC (10.0.0.0/16):
    <pre>
    Destination     Target
    10.0.0.0/16    local
    0.0.0.0/0      tgw-id
    </pre>
                    </li>
                    <li>VPC-A (10.1.0.0/16):
    <pre>
    Destination     Target
    10.1.0.0/16    local
    0.0.0.0/0      tgw-id
    </pre>
                    </li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Traffic Flow Examples</strong></p>
        <ul>
            <li><strong>Scenario 1: VPC-A to Shared Services</strong>
                <ul>
                    <li>1. VPC-A instance (10.1.1.10) sends packet to Shared Services (10.0.1.10)</li>
                    <li>2. VPC-A route table sends to TGW (0.0.0.0/0)</li>
                    <li>3. TGW VPC-A route table matches 10.0.0.0/16 → forwards to Shared Services VPC</li>
                    <li>4. Shared Services VPC receives via local route</li>
                </ul>
            </li>
            <li><strong>Scenario 2: VPC-A to VPC-B (Blocked)</strong>
                <ul>
                    <li>1. VPC-A instance tries to reach VPC-B</li>
                    <li>2. No route exists in VPC-A's TGW route table</li>
                    <li>3. Traffic is dropped</li>
                </ul>
            </li>
            <li><strong>Scenario 3: On-premises to Shared Services</strong>
                <ul>
                    <li>1. On-premises (172.16.1.10) sends to Shared Services (10.0.1.10)</li>
                    <li>2. VPN attachment routes through TGW</li>
                    <li>3. VPN route table matches Shared Services CIDR</li>
                    <li>4. Traffic reaches Shared Services VPC</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Key Design Considerations</strong></p>
        <ul>
            <li><strong>Route Table Strategy:</strong>
                <ul>
                    <li>Careful route propagation planning</li>
                    <li>Shared Services VPC needs routes to all VPCs</li>
                    <li>Isolated VPCs only get Shared Services routes</li>
                    <li>On-premises gets routes to all VPCs</li>
                </ul>
            </li>
            <li><strong>Security Considerations:</strong>
                <ul>
                    <li>Security groups in Shared Services VPC</li>
                    <li>Network ACLs for additional control</li>
                    <li>Consider service endpoints in Shared Services VPC</li>
                    <li>Monitor access patterns</li>
                </ul>
            </li>
            <li><strong>Scaling Aspects:</strong>
                <ul>
                    <li>Route table limits per TGW</li>
                    <li>Route propagation management complexity</li>
                    <li>Shared Services VPC capacity planning</li>
                    <li>Consider regional services distribution</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Exam Tips</strong></p>
        <ul>
            <li><strong>Key Points:</strong>
                <ul>
                    <li>Multiple route tables with specific propagation</li>
                    <li>Shared Services VPC accessible by all</li>
                    <li>VPCs remain isolated from each other</li>
                    <li>On-premises access to all VPCs</li>
                </ul>
            </li>
            <li><strong>Common Scenarios:</strong>
                <ul>
                    <li>Enterprise shared services deployment</li>
                    <li>Centralized security services</li>
                    <li>DNS and Directory Services</li>
                    <li>Compliance with isolation requirements</li>
                </ul>
            </li>
            <li><strong>Route Table Focus:</strong>
                <ul>
                    <li>Understand propagation patterns</li>
                    <li>Know which routes each VPC needs</li>
                    <li>Recognize traffic flow patterns</li>
                    <li>Identify blocked vs allowed paths</li>
                </ul>
            </li>
        </ul>
    </div>


    <div class="container mt-5">
        <p style="color: blueviolet; font-size: 20px;"><strong>Transit Gateway Pattern: Peered Transit Gateways</strong></p>
    
        <p>You can create a transit gateway peering connection between transit gateways and route traffic between their attachments. This enables communication between VPCs and on-premises networks across regions through transit gateway peering. Each transit gateway maintains its own route tables, and static routes are used to direct traffic through the peering connection.</p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Pattern Summary</strong></p>
        <ul>
            <li><strong>Use Case:</strong>
                <ul>
                    <li>Cross-region VPC connectivity</li>
                    <li>Shared VPN access across regions</li>
                    <li>Regional network isolation with controlled inter-region access</li>
                </ul>
            </li>
        </ul>

        <figure style="width:100%;">
            <img src="img/tgw-example-transit-gateway-peering.png" style="width:42%;border: 2px solid lightcoral;" alt="VPC Ingress Routing Architecture"/>
            <figcaption style="width:42%;text-align: center; font-size: 14px; color: gray;">Figure: TGW Peering</figcaption>
        </figure>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Route Tables</strong></p>
        <ul>
            <li><strong>VPC Route Tables:</strong>
                <ul>
                    <li>VPC A (10.0.0.0/16):
    <pre>
    Destination     Target
    10.0.0.0/16    local
    0.0.0.0/0      tgw-1-id
    </pre>
                    </li>
                    <li>VPC B (10.2.0.0/16):
    <pre>
    Destination     Target
    10.2.0.0/16    local
    0.0.0.0/0      tgw-1-id
    </pre>
                    </li>
                </ul>
            </li>
            <li><strong>Transit Gateway 1 Route Table:</strong>
    <pre>
    Destination     Target                          Route Type
    10.0.0.0/16    Attachment ID for VPC A         propagated
    10.2.0.0/16    Attachment ID for VPC B         propagated
    0.0.0.0/0      Attachment ID for TGW peering   static
    </pre>
            </li>
            <li><strong>Transit Gateway 2 Route Table:</strong>
    <pre>
    Destination     Target                          Route Type
    172.31.0.0/24  Attachment ID for VPN           propagated
    10.0.0.0/16    Attachment ID for TGW peering   static
    10.2.0.0/16    Attachment ID for TGW peering   static
    </pre>
            </li>


            <li><strong>Customer Gateway BGP Table:</strong>
    <pre>
    Network         Next Hop             Path
    10.0.0.0/16    TGW-2 VPN Interface  ASN TGW-2, ASN TGW-1
    10.2.0.0/16    TGW-2 VPN Interface  ASN TGW-2, ASN TGW-1
    172.31.0.0/24  Local                Local
    </pre>
    </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Traffic Flow Examples</strong></p>
        <ul>
            <li><strong>Scenario: VPC A to Internet via VPN</strong>
                <ul>
                    <li>1. Instance in VPC A (10.0.1.10) sends traffic to internet (8.8.8.8)</li>
                    <li>2. VPC A route table sends to TGW-1 (0.0.0.0/0 → tgw-1-id)</li>
                    <li>3. TGW-1 route table matches 0.0.0.0/0 → forwards to TGW-2 via peering</li>
                    <li>4. TGW-2 route table forwards to VPN attachment</li>
                    <li>5. Traffic reaches customer gateway and exits to internet</li>
                </ul>
            </li>
            <li><strong>Scenario: VPC A to VPC B</strong>
                <ul>
                    <li>1. Instance in VPC A (10.0.1.10) sends to VPC B (10.2.1.10)</li>
                    <li>2. VPC A route table sends to TGW-1 (0.0.0.0/0 → tgw-1-id)</li>
                    <li>3. TGW-1 route table matches 10.2.0.0/16 → forwards directly to VPC B attachment</li>
                    <li>4. Traffic reaches VPC B via local route</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Key Limitations</strong></p>
        <ul>
            <li>Cannot peer transit gateways in same region</li>
            <li>No transitive routing through peering connection</li>
            <li>Maximum 50 peering attachments per transit gateway</li>
            <li>Static routes required for peering (no automatic propagation)</li>
            <li>CIDR ranges cannot overlap between peered networks</li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Exam Tips</strong></p>
        <ul>
            <li><strong>Remember:</strong>
                <ul>
                    <li>Each TGW maintains separate route tables</li>
                    <li>Static routes needed for peering communication</li>
                    <li>BGP routes propagate to customer gateway</li>
                    <li>Cross-region traffic flows through peering attachment</li>
                </ul>
            </li>
        </ul>
    </div>


</body>
