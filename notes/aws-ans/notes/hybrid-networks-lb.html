<!DOCTYPE html>
<html lang="en-US">

<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">

	<!-- Open Graph / Facebook -->
	<meta property="og:type" content="website">
	<meta property="og:locale" content="en_US">
	<meta property="og:url" content="https://christoferson.github.io/">
	<meta property="og:site_name" content="christoferson.github.io">
	<meta property="og:title" content="Meta Tags Preview, Edit and Generate">
	<meta property="og:description" content="Christoferson Chua GitHub Page">

	<!-- Twitter -->
	<meta property="twitter:card" content="summary_large_image">
	<meta property="twitter:url" content="https://christoferson.github.io/">
	<meta property="twitter:title" content="christoferson.github.io">
	<meta property="twitter:description" content="Christoferson Chua GitHub Page">

	<script type="application/ld+json">{
		"name": "christoferson.github.io",
		"description": "Machine Learning",
		"url": "https://christoferson.github.io/",
		"@type": "WebSite",
		"headline": "christoferson.github.io",
		"@context": "https://schema.org"
	}</script>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" />
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>

	<title>Christoferson Chua</title>
	<meta name="title" content="Christoferson Chua | GitHub Page | Machine Learning">
	<meta name="description" content="Christoferson Chua GitHub Page - Machine Learning">
	<meta name="keywords" content="Backend,Java,Spring,Aws,Python,Machine Learning">

	<link rel="stylesheet" href="style.css">

</head>


<body>

    <div class="container-fluid p-5 bg-primary text-white text-center">
        <h1>AWS Certified Advanced Networking - Specialty (ANS-C01)</h1>
    </div>

	<div class="container mt-5">
        <p style="color: blueviolet; font-size: 20px;"><strong>AWS Gateway Load Balancer (GWLB) Study Guide - Part 1</strong></p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Topic: TCP Keep-alive and Timeout Management</strong></p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Introduction to the Problem</strong></p>
        <ul>
            <li><strong>Background:</strong>
                <ul>
                    <li>GWLB acts as a transparent gateway for routing traffic through security appliances (like firewalls)</li>
                    <li>It maintains connection state tables to track and manage traffic flows</li>
                    <li>Different applications have different connection behaviors:
                        <ul>
                            <li>Database connections might be idle for long periods</li>
                            <li>API calls might wait extended times for responses</li>
                            <li>Regular web traffic has frequent activity</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>The Challenge:</strong>
                <ul>
                    <li>Example scenario:
                        <ul>
                            <li>A database connection stays idle for 400 seconds</li>
                            <li>GWLB has default timeout of 350 seconds</li>
                            <li>Firewall has default timeout of 3600 seconds</li>
                            <li>Result: GWLB drops connection while application and firewall think it's still active</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>Why This Is a Problem:</strong>
                <ul>
                    <li>Unexpected connection drops in long-running applications</li>
                    <li>Mismatched timeout settings between components</li>
                    <li>Different handling required for TCP vs UDP traffic</li>
                    <li>Security state inconsistency between GWLB and firewalls</li>
                </ul>
            </li>
            <li><strong>The Solution:</strong>
                <ul>
                    <li>Proper configuration of timeout values across all components</li>
                    <li>Understanding and managing TCP keep-alive mechanisms</li>
                    <li>Different strategies for TCP and non-TCP traffic</li>
                    <li>Alignment of timeout settings between GWLB, applications, and security appliances</li>
                </ul>
            </li>
        </ul>
        
        <p style="color: #0066cc; font-size: 16px;"><strong>Key Concepts</strong></p>
        <ul>
            <li><strong>GWLB Timeout Settings:</strong>
                <ul>
                    <li>TCP flows: Configurable between 60-6000 seconds</li>
                    <li>UDP and other non-TCP flows: Fixed at 120 seconds</li>
                </ul>
            </li>
            <li><strong>Timeout Conflicts Example:</strong>
                <ul>
                    <li>Firewall default timeout is typically 3600 seconds (1 hour)</li>
                    <li>If GWLB timeout is set to 350 seconds, the connection will be dropped by GWLB first, causing unexpected disconnections</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Important Points to Remember</strong></p>
        <ul>
            <li><strong>TCP Flow Behavior:</strong>
                <ul>
                    <li>When a TCP connection is idle for longer than the configured timeout (e.g., 350 seconds), GWLB removes it from its connection table</li>
                    <li>New TCP connections will be distributed to any available healthy target</li>
                </ul>
            </li>
            <li><strong>UDP Flow Behavior:</strong>
                <ul>
                    <li>UDP timeouts are managed at the application level, not the OS level</li>
                    <li>After 120 seconds of inactivity, UDP packets may be sent to different firewall instances</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Best Practices</strong></p>
        <ul>
            <li><strong>Timeout Configuration:</strong>
                <ul>
                    <li>Example: If GWLB timeout is 350 seconds, set firewall timeout to 300 seconds to ensure firewall closes connections first</li>
                    <li>For TCP applications with long idle periods, configure keep-alive intervals below 350 seconds</li>
                </ul>
            </li>
            <li><strong>Application Considerations:</strong>
                <ul>
                    <li>Database connections often have long idle periods - ensure keep-alive is configured appropriately</li>
                    <li>API calls that wait for responses should use timeouts lower than GWLB settings</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Exam Tips</strong></p>
        <ul>
            <li><strong>TCP Timeout Scenarios:</strong>
                <ul>
                    <li>GWLB drops TCP connections after configured timeout (60-6000 seconds)</li>
                    <li>Subsequent non-SYN TCP packets for terminated connections are dropped</li>
                    <li>New TCP connections with same parameters may go to different targets</li>
                </ul>
            </li>
            <li><strong>UDP Handling:</strong>
                <ul>
                    <li>120-second fixed timeout for UDP flows</li>
                    <li>After timeout, UDP packets might be processed by different firewall instances</li>
                    <li>No OS-level UDP timeout settings - all handled at application level</li>
                </ul>
            </li>
        </ul>
    </div>

    <div class="container mt-5">
        <p style="color: blueviolet; font-size: 20px;"><strong>AWS Gateway Load Balancer (GWLB) Study Guide - Part 2</strong></p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Topic: Appliance Mode and Traffic Symmetry</strong></p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Introduction to the Problem</strong></p>
        <ul>
            <li><strong>Background:</strong>
                <ul>
                    <li>Organizations need centralized security inspection for traffic between VPCs</li>
                    <li>This is typically done through an Appliance VPC (also called Security VPC or Inspection VPC)</li>
                    <li>Appliance VPC hosts security services like firewalls for deep packet inspection</li>
                </ul>
            </li>
            <li><strong>The Challenge:</strong>
                <ul>
                    <li>Consider two EC2 instances in different VPCs and different AZs trying to communicate:</li>
                    <li>Example scenario:
                        <ul>
                            <li>EC2 in VPC1 (AZ1) → Security VPC → VPC2 (AZ2)</li>
                            <li>Return traffic: VPC2 (AZ2) → Security VPC → VPC1 (AZ1)</li>
                            <li>Result: Forward and return traffic use different GWLB endpoints and different firewalls</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>Why This Is a Problem:</strong>
                <ul>
                    <li>Stateful firewalls need to see both directions of traffic flow</li>
                    <li>Asymmetric routing breaks stateful inspection</li>
                    <li>Security policies may not be properly enforced</li>
                </ul>
            </li>
            <li><strong>The Solution:</strong>
                <ul>
                    <li>Transit Gateway Appliance Mode ensures both directions of a flow use the same firewall</li>
                    <li>Traffic can cross AZs when needed to maintain symmetry</li>
                    <li>Enables proper stateful inspection and security policy enforcement</li>
                </ul>
            </li>
        </ul>
        
        <p style="color: #0066cc; font-size: 16px;"><strong>Key Concepts</strong></p>
        <ul>
            <li><strong>Traffic Flow Without Appliance Mode:</strong>
                <ul>
                    <li>By default, Transit Gateway keeps traffic in the same AZ where it originated</li>
                    <li>Example: Traffic from VPC1 in AZ1 to VPC2 in AZ2 will use GWLB endpoint in AZ1 for outbound, but AZ2 for return traffic</li>
                    <li>This creates asymmetric routing where forward and return traffic use different firewall instances</li>
                </ul>
            </li>
            <li><strong>Appliance Mode Benefits:</strong>
                <ul>
                    <li>Ensures both directions of traffic flow through the same firewall instance</li>
                    <li>Maintains stateful inspection capability</li>
                    <li>Allows firewalls to see complete traffic flow (both directions)</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Important Points to Remember</strong></p>
        <ul>
            <li><strong>When to Use Appliance Mode:</strong>
                <ul>
                    <li>Required: For VPC-to-VPC traffic inspection through security VPC</li>
                    <li>Optional: For Internet egress traffic inspection</li>
                    <li>Example: If Spoke VPC1 in AZ1 communicates with Spoke VPC2 in AZ2, enable Appliance Mode</li>
                </ul>
            </li>
            <li><strong>Key Limitations:</strong>
                <ul>
                    <li>Only one Transit Gateway can connect to the security VPC for guaranteed flow stickiness</li>
                    <li>Multiple Transit Gateways cannot share flow state information</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Best Practices</strong></p>
        <ul>
            <li><strong>Traffic Patterns:</strong>
                <ul>
                    <li>For East-West traffic (VPC-to-VPC): Always enable Appliance Mode</li>
                    <li>For Internet egress: Consider enabling if you need to balance load across AZs</li>
                </ul>
            </li>
            <li><strong>AZ Traffic Distribution:</strong>
                <ul>
                    <li>Without Appliance Mode: Traffic stays in originating AZ</li>
                    <li>With Appliance Mode: Traffic can cross AZs for better distribution</li>
                    <li>Note: As of April 2022, no inter-AZ data transfer charges in this scenario</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Exam Tips</strong></p>
        <ul>
            <li><strong>Default Behavior:</strong>
                <ul>
                    <li>Appliance Mode is disabled by default on Transit Gateway VPC attachments</li>
                    <li>Traffic naturally stays within source AZ without Appliance Mode</li>
                    <li>Asymmetric routing occurs when traffic crosses AZs</li>
                </ul>
            </li>
            <li><strong>Configuration Scenarios:</strong>
                <ul>
                    <li>Security VPC with stateful firewalls = Enable Appliance Mode</li>
                    <li>Internet egress only = Appliance Mode optional</li>
                    <li>Multiple Transit Gateways = Use single Transit Gateway for inspection</li>
                </ul>
            </li>
            <li><strong>Traffic Flow Examples:</strong>
                <ul>
                    <li>VPC1 (AZ1) → Security VPC → VPC2 (AZ2): Enable Appliance Mode</li>
                    <li>VPC1 (AZ1) → Security VPC → Internet: Appliance Mode optional</li>
                </ul>
            </li>
        </ul>
    </div>

	
	
	

</body>
