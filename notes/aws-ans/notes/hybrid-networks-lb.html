<!DOCTYPE html>
<html lang="en-US">

<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">

	<!-- Open Graph / Facebook -->
	<meta property="og:type" content="website">
	<meta property="og:locale" content="en_US">
	<meta property="og:url" content="https://christoferson.github.io/">
	<meta property="og:site_name" content="christoferson.github.io">
	<meta property="og:title" content="Meta Tags Preview, Edit and Generate">
	<meta property="og:description" content="Christoferson Chua GitHub Page">

	<!-- Twitter -->
	<meta property="twitter:card" content="summary_large_image">
	<meta property="twitter:url" content="https://christoferson.github.io/">
	<meta property="twitter:title" content="christoferson.github.io">
	<meta property="twitter:description" content="Christoferson Chua GitHub Page">

	<script type="application/ld+json">{
		"name": "christoferson.github.io",
		"description": "Machine Learning",
		"url": "https://christoferson.github.io/",
		"@type": "WebSite",
		"headline": "christoferson.github.io",
		"@context": "https://schema.org"
	}</script>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" />
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>

	<title>Christoferson Chua</title>
	<meta name="title" content="Christoferson Chua | GitHub Page | Machine Learning">
	<meta name="description" content="Christoferson Chua GitHub Page - Machine Learning">
	<meta name="keywords" content="Backend,Java,Spring,Aws,Python,Machine Learning">

	<link rel="stylesheet" href="style.css">

</head>


<body>

    <div class="container-fluid p-5 bg-primary text-white text-center">
        <h1>AWS Certified Advanced Networking - Specialty (ANS-C01)</h1>
    </div>

    <div class="container mt-5">
        <p style="color: blueviolet; font-size: 20px;"><strong>AWS Gateway Load Balancer (GWLB) Study Guide - Introduction</strong></p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>What is Gateway Load Balancer?</strong></p>
        <ul>
            <li>GWLB is a service that makes it easy to deploy, scale, and manage third-party virtual appliances such as:
                <ul>
                    <li>Firewalls</li>
                    <li>Intrusion Detection and Prevention Systems</li>
                    <li>Deep Packet Inspection Systems</li>
                </ul>
            </li>
            <li>Key Functions:
                <ul>
                    <li>Acts as a transparent gateway for network traffic</li>
                    <li>Routes traffic through security appliances</li>
                    <li>Maintains connection state information</li>
                    <li>Provides high availability and scalability</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Study Guide Contents</strong></p>
        <ul>
            <li><strong>Part 1: TCP Keep-alive and Timeout Management</strong>
                <ul>
                    <li>Understanding connection timeouts</li>
                    <li>Managing long-lived connections</li>
                    <li>TCP and non-TCP flow handling</li>
                </ul>
            </li>
            <li><strong>Part 2: Appliance Mode and Traffic Symmetry</strong>
                <ul>
                    <li>Transit Gateway integration</li>
                    <li>Maintaining flow symmetry</li>
                    <li>Inter-VPC traffic inspection</li>
                </ul>
            </li>
            <li><strong>Part 3: Cross-Zone Load Balancing</strong>
                <ul>
                    <li>Traffic distribution across AZs</li>
                    <li>High availability considerations</li>
                    <li>Cost implications</li>
                </ul>
            </li>
            <li><strong>Part 4: Appliance and AZ Failure Scenarios</strong>
                <ul>
                    <li>Understanding failure types</li>
                    <li>Recovery behaviors</li>
                    <li>Impact on traffic flows</li>
                </ul>
            </li>
            <li><strong>Part 5: One-Arm vs Two-Arm for Egress Traffic</strong>
                <ul>
                    <li>NAT handling options</li>
                    <li>Deployment architectures</li>
                    <li>Vendor considerations</li>
                </ul>
            </li>
            <li><strong>Part 6: SSL/TLS Traffic Inspection</strong>
                <ul>
                    <li>Encrypted traffic handling</li>
                    <li>Deployment modes</li>
                    <li>Vendor support</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Key Learning Objectives</strong></p>
        <ul>
            <li>Understand GWLB's role in network security architecture</li>
            <li>Learn best practices for deploying and managing GWLB</li>
            <li>Master different deployment patterns and their use cases</li>
            <li>Understand failure scenarios and recovery processes</li>
            <li>Know when to use different architectural options</li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Prerequisites</strong></p>
        <ul>
            <li>Basic understanding of:
                <ul>
                    <li>AWS VPC networking</li>
                    <li>Load balancing concepts</li>
                    <li>Network security principles</li>
                    <li>High availability design</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>How to Use This Guide</strong></p>
        <ul>
            <li>Each part is self-contained but builds on previous concepts</li>
            <li>Focus on understanding the problems each feature solves</li>
            <li>Pay attention to best practices and exam tips</li>
            <li>Review vendor-specific information for relevant deployments</li>
        </ul>
        <p style="color: #0066cc; font-size: 16px;"><strong>Links</strong></p>
        <ul>
            <li><a href="https://aws.amazon.com/blogs/networking-and-content-delivery/best-practices-for-deploying-gateway-load-balancer/">Best practices for deploying Gateway Load Balancer</a></li>
        </ul>
    </div>

	<div class="container mt-5">
        <p style="color: blueviolet; font-size: 20px;"><strong>AWS Gateway Load Balancer (GWLB) Study Guide - Part 1</strong></p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Topic: TCP Keep-alive and Timeout Management</strong></p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Introduction to the Problem</strong></p>
        <ul>
            <li><strong>Background:</strong>
                <ul>
                    <li>GWLB acts as a transparent gateway for routing traffic through security appliances (like firewalls)</li>
                    <li>It maintains connection state tables to track and manage traffic flows</li>
                    <li>Different applications have different connection behaviors:
                        <ul>
                            <li>Database connections might be idle for long periods</li>
                            <li>API calls might wait extended times for responses</li>
                            <li>Regular web traffic has frequent activity</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>The Challenge:</strong>
                <ul>
                    <li>Example scenario:
                        <ul>
                            <li>A database connection stays idle for 400 seconds</li>
                            <li>GWLB has default timeout of 350 seconds</li>
                            <li>Firewall has default timeout of 3600 seconds</li>
                            <li>Result: GWLB drops connection while application and firewall think it's still active</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>Why This Is a Problem:</strong>
                <ul>
                    <li>Unexpected connection drops in long-running applications</li>
                    <li>Mismatched timeout settings between components</li>
                    <li>Different handling required for TCP vs UDP traffic</li>
                    <li>Security state inconsistency between GWLB and firewalls</li>
                </ul>
            </li>
            <li><strong>The Solution:</strong>
                <ul>
                    <li>Proper configuration of timeout values across all components</li>
                    <li>Understanding and managing TCP keep-alive mechanisms</li>
                    <li>Different strategies for TCP and non-TCP traffic</li>
                    <li>Alignment of timeout settings between GWLB, applications, and security appliances</li>
                </ul>
            </li>
        </ul>

        <figure>
            <img src="img/aws-glb-timeout-settings.png" style="width: 42%;border: 2px solid lightcoral;" alt="AWS Global Timeout Settings"/>
            <figcaption style="width: 42%;text-align: center; font-size: 14px; color: gray;">Figure: Set the keep-alive and timeout values at client/server (application or OS level) or firewalls respectively.</figcaption>
        </figure>
        
        <p style="color: #0066cc; font-size: 16px;"><strong>Key Concepts</strong></p>
        <ul>
            <li><strong>GWLB Timeout Settings:</strong>
                <ul>
                    <li>TCP flows: Configurable between 60-6000 seconds</li>
                    <li>UDP and other non-TCP flows: Fixed at 120 seconds</li>
                </ul>
            </li>
            <li><strong>Timeout Conflicts Example:</strong>
                <ul>
                    <li>Firewall default timeout is typically 3600 seconds (1 hour)</li>
                    <li>If GWLB timeout is set to 350 seconds, the connection will be dropped by GWLB first, causing unexpected disconnections</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Important Points to Remember</strong></p>
        <ul>
            <li><strong>TCP Flow Behavior:</strong>
                <ul>
                    <li>When a TCP connection is idle for longer than the configured timeout (e.g., 350 seconds), GWLB removes it from its connection table</li>
                    <li>New TCP connections will be distributed to any available healthy target</li>
                </ul>
            </li>
            <li><strong>UDP Flow Behavior:</strong>
                <ul>
                    <li>UDP timeouts are managed at the application level, not the OS level</li>
                    <li>After 120 seconds of inactivity, UDP packets may be sent to different firewall instances</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Best Practices</strong></p>
        <ul>
            <li><strong>Timeout Configuration:</strong>
                <ul>
                    <li>Example: If GWLB timeout is 350 seconds, set firewall timeout to 300 seconds to ensure firewall closes connections first</li>
                    <li>For TCP applications with long idle periods, configure keep-alive intervals below 350 seconds</li>
                </ul>
            </li>
            <li><strong>Application Considerations:</strong>
                <ul>
                    <li>Database connections often have long idle periods - ensure keep-alive is configured appropriately</li>
                    <li>API calls that wait for responses should use timeouts lower than GWLB settings</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Exam Tips</strong></p>
        <ul>
            <li><strong>TCP Timeout Scenarios:</strong>
                <ul>
                    <li>GWLB drops TCP connections after configured timeout (60-6000 seconds)</li>
                    <li>Subsequent non-SYN TCP packets for terminated connections are dropped</li>
                    <li>New TCP connections with same parameters may go to different targets</li>
                </ul>
            </li>
            <li><strong>UDP Handling:</strong>
                <ul>
                    <li>120-second fixed timeout for UDP flows</li>
                    <li>After timeout, UDP packets might be processed by different firewall instances</li>
                    <li>No OS-level UDP timeout settings - all handled at application level</li>
                </ul>
            </li>
        </ul>
    </div>

    <div class="container mt-5">
        <p style="color: blueviolet; font-size: 20px;"><strong>AWS Gateway Load Balancer (GWLB) Study Guide - Part 2</strong></p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Topic: Appliance Mode and Traffic Symmetry</strong></p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Introduction to the Problem</strong></p>
        <ul>
            <li><strong>Background:</strong>
                <ul>
                    <li>Organizations need centralized security inspection for traffic between VPCs</li>
                    <li>This is typically done through an Appliance VPC (also called Security VPC or Inspection VPC)</li>
                    <li>Appliance VPC hosts security services like firewalls for deep packet inspection</li>
                </ul>
            </li>
            <li><strong>The Challenge:</strong>
                <ul>
                    <li>Consider two EC2 instances in different VPCs and different AZs trying to communicate:</li>
                    <li>Example scenario:
                        <ul>
                            <li>EC2 in VPC1 (AZ1) → Security VPC → VPC2 (AZ2)</li>
                            <li>Return traffic: VPC2 (AZ2) → Security VPC → VPC1 (AZ1)</li>
                            <li>Result: Forward and return traffic use different GWLB endpoints and different firewalls</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>Why This Is a Problem:</strong>
                <ul>
                    <li>Stateful firewalls need to see both directions of traffic flow</li>
                    <li>Asymmetric routing breaks stateful inspection</li>
                    <li>Security policies may not be properly enforced</li>
                </ul>
            </li>
            <li><strong>The Solution:</strong>
                <ul>
                    <li>Transit Gateway Appliance Mode ensures both directions of a flow use the same firewall</li>
                    <li>Traffic can cross AZs when needed to maintain symmetry</li>
                    <li>Enables proper stateful inspection and security policy enforcement</li>
                </ul>
            </li>
        </ul>

        
        <figure>
            <img src="img/aws-glb-vpc-assymetric-appliance-default.png" style="width:82%;border: 2px solid lightcoral;" alt="AWS Global Timeout Settings"/>
            <figcaption style="width:82%;text-align: center; font-size: 14px; color: gray;">Figure: Asymmetric traffic flow when Transit Gateway Appliance Mode is disabled on the Appliance VPC attachment (default behavior)</figcaption>
        </figure>

        <figure>
            <img src="img/aws-glb-vpc-symetric-appliance-mode.png" style="width:82%;border: 2px solid lightcoral;" alt="AWS Global Timeout Settings"/>
            <figcaption style="width:82%;text-align: center; font-size: 14px; color: gray;">Figure: Symmetric traffic flow when Transit Gateway Appliance Mode is enabled on the Appliance VPC attachment</figcaption>
        </figure>
        
        <p style="color: #0066cc; font-size: 16px;"><strong>Key Concepts</strong></p>
        <ul>
            <li><strong>Traffic Flow Without Appliance Mode:</strong>
                <ul>
                    <li>By default, Transit Gateway keeps traffic in the same AZ where it originated</li>
                    <li>Example: Traffic from VPC1 in AZ1 to VPC2 in AZ2 will use GWLB endpoint in AZ1 for outbound, but AZ2 for return traffic</li>
                    <li>This creates asymmetric routing where forward and return traffic use different firewall instances</li>
                </ul>
            </li>
            <li><strong>Appliance Mode Benefits:</strong>
                <ul>
                    <li>Ensures both directions of traffic flow through the same firewall instance</li>
                    <li>Maintains stateful inspection capability</li>
                    <li>Allows firewalls to see complete traffic flow (both directions)</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Important Points to Remember</strong></p>
        <ul>
            <li><strong>When to Use Appliance Mode:</strong>
                <ul>
                    <li>Required: For VPC-to-VPC traffic inspection through security VPC</li>
                    <li>Optional: For Internet egress traffic inspection</li>
                    <li>Example: If Spoke VPC1 in AZ1 communicates with Spoke VPC2 in AZ2, enable Appliance Mode</li>
                </ul>
            </li>
            <li><strong>Key Limitations:</strong>
                <ul>
                    <li>Only one Transit Gateway can connect to the security VPC for guaranteed flow stickiness</li>
                    <li>Multiple Transit Gateways cannot share flow state information</li>
                </ul>
            </li>
        </ul>

        <p style="color: #0066cc; font-size: 16px;"><strong>Egress Traffic Considerations</strong></p>
        <figure">
            <img src="img/aws-glb-vpc-symetric-appliance-mode.png" style="width:82%;border: 2px solid lightcoral;" alt="AWS Global Timeout Settings"/>
            <figcaption style="width:82%;text-align: center; font-size: 14px; color: gray;">Figure: Appliance Mode is disabled (default behavior) on the dedicated Internet egress Appliance VPC</figcaption>
        </figure>
        <ul>
            <li><strong>Centralized Internet Egress:</strong>
                <ul>
                    <li>For dedicated Internet Egress Appliance VPC:
                        <ul>
                            <li>No bidirectional traffic between VPC attachments exists</li>
                            <li>Appliance Mode is optional</li>
                        </ul>
                    </li>
                    <li>When to Enable Appliance Mode for Egress:
                        <ul>
                            <li>When specific AZs generate more egress traffic than others</li>
                            <li>To prevent saturation of firewalls in specific AZs</li>
                            <li>To distribute traffic evenly across AZ firewalls</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>Summary of Appliance Mode for Different Traffic Types:</strong>
                <ul>
                    <li>VPC-to-VPC traffic inspection: Required</li>
                    <li>Internet egress traffic inspection: Optional</li>
                    <li>Impact when enabled:
                        <ul>
                            <li>AZ affinity is no longer maintained</li>
                            <li>Traffic can cross AZs freely</li>
                            <li>No inter-AZ data transfer charges (as of April 2022)</li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>

    
        <p style="color: #0066cc; font-size: 16px;"><strong>Best Practices</strong></p>
        <ul>
            <li><strong>Traffic Patterns:</strong>
                <ul>
                    <li>For East-West traffic (VPC-to-VPC): Always enable Appliance Mode</li>
                    <li>For Internet egress: Consider enabling if you need to balance load across AZs</li>
                </ul>
            </li>
            <li><strong>AZ Traffic Distribution:</strong>
                <ul>
                    <li>Without Appliance Mode: Traffic stays in originating AZ</li>
                    <li>With Appliance Mode: Traffic can cross AZs for better distribution</li>
                    <li>Note: As of April 2022, no inter-AZ data transfer charges in this scenario</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Exam Tips</strong></p>
        <ul>
            <li><strong>Default Behavior:</strong>
                <ul>
                    <li>Appliance Mode is disabled by default on Transit Gateway VPC attachments</li>
                    <li>Traffic naturally stays within source AZ without Appliance Mode</li>
                    <li>Asymmetric routing occurs when traffic crosses AZs</li>
                </ul>
            </li>
            <li><strong>Configuration Scenarios:</strong>
                <ul>
                    <li>Security VPC with stateful firewalls = Enable Appliance Mode</li>
                    <li>Internet egress only = Appliance Mode optional</li>
                    <li>Multiple Transit Gateways = Use single Transit Gateway for inspection</li>
                </ul>
            </li>
            <li><strong>Traffic Flow Examples:</strong>
                <ul>
                    <li>VPC1 (AZ1) → Security VPC → VPC2 (AZ2): Enable Appliance Mode</li>
                    <li>VPC1 (AZ1) → Security VPC → Internet: Appliance Mode optional</li>
                </ul>
            </li>
        </ul>
    </div>


    <div class="container mt-5">
        <p style="color: blueviolet; font-size: 20px;"><strong>AWS Gateway Load Balancer (GWLB) Study Guide - Part 3</strong></p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Topic: Cross-Zone Load Balancing</strong></p>
    
        <figure>
            <img src="img/aws-glb-crosszone-lb-default-disabled.png" style="width: 42%;border: 2px solid lightcoral;" alt="AWS Global Timeout Settings"/>
            <figcaption style="width: 42%;text-align: center; font-size: 14px; color: gray;">Figure: Typical deployment diagram of firewall with GWLB demonstrating how flows are distributed when cross-zone load balancing is enabled (disabled by default).</figcaption>
        </figure>

        <p style="color: #0066cc; font-size: 16px;"><strong>Introduction to the Problem</strong></p>
        <ul>
            <li><strong>Background:</strong>
                <ul>
                    <li>Organizations deploy multiple firewall instances across AZs for high availability</li>
                    <li>Traffic load may not be evenly distributed across these firewalls</li>
                    <li>Default behavior: GWLB distributes traffic only to targets within the same AZ</li>
                </ul>
            </li>
            <li><strong>The Challenge:</strong>
                <ul>
                    <li>Example scenario:
                        <ul>
                            <li>AZ1 has heavy traffic but only two firewall instances</li>
                            <li>AZ2 has light traffic but five firewall instances</li>
                            <li>Result: AZ1 firewalls are overloaded while AZ2 firewalls are underutilized</li>
                        </ul>
                    </li>
                    <li>Additional risk: If all firewalls in one AZ fail, traffic in that AZ has nowhere to go</li>
                </ul>
            </li>
            <li><strong>Why This Is a Problem:</strong>
                <ul>
                    <li>Inefficient use of firewall resources</li>
                    <li>Potential performance bottlenecks in busy AZs</li>
                    <li>Limited failure recovery options within single AZ</li>
                    <li>Cost implications of maintaining excess capacity in each AZ</li>
                </ul>
            </li>
            <li><strong>The Solution:</strong>
                <ul>
                    <li>Cross-Zone Load Balancing allows traffic distribution across all AZs</li>
                    <li>Provides better resource utilization and high availability</li>
                    <li>Trades off potential inter-AZ data transfer costs for improved reliability</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Key Concepts</strong></p>
        <ul>
            <li><strong>Default Behavior (Cross-Zone Disabled):</strong>
                <ul>
                    <li>Traffic stays within source AZ</li>
                    <li>Even distribution only among targets in same AZ</li>
                    <li>No inter-AZ data transfer costs</li>
                </ul>
            </li>
            <li><strong>Cross-Zone Enabled Behavior:</strong>
                <ul>
                    <li>Traffic can flow to any healthy target in any AZ</li>
                    <li>Even distribution across ALL healthy targets</li>
                    <li>Incurs inter-AZ data transfer charges</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Important Points to Remember</strong></p>
        <ul>
            <li><strong>High Availability Scenarios:</strong>
                <ul>
                    <li>Without Cross-Zone: If all targets in an AZ fail, traffic in that AZ fails</li>
                    <li>With Cross-Zone: Traffic automatically routes to healthy targets in other AZs</li>
                </ul>
            </li>
            <li><strong>Cost Considerations:</strong>
                <ul>
                    <li>Standard inter-AZ data transfer charges apply when enabled</li>
                    <li>Trade-off between cost and availability/performance</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Best Practices</strong></p>
        <ul>
            <li><strong>When to Enable Cross-Zone Load Balancing:</strong>
                <ul>
                    <li>When high availability is more important than data transfer costs</li>
                    <li>When workload distribution across AZs is uneven</li>
                    <li>When you can't maintain sufficient capacity in each AZ</li>
                </ul>
            </li>
            <li><strong>When to Keep it Disabled:</strong>
                <ul>
                    <li>When you have sufficient capacity in each AZ</li>
                    <li>When minimizing costs is a priority</li>
                    <li>When traffic patterns are predictably distributed across AZs</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Exam Tips</strong></p>
        <ul>
            <li><strong>Default Settings:</strong>
                <ul>
                    <li>Cross-Zone Load Balancing is disabled by default</li>
                    <li>Each AZ's traffic stays within that AZ by default</li>
                </ul>
            </li>
            <li><strong>Key Decision Factors:</strong>
                <ul>
                    <li>High Availability requirements vs Cost optimization</li>
                    <li>Traffic distribution patterns across AZs</li>
                    <li>Capacity planning requirements</li>
                </ul>
            </li>
            <li><strong>Failure Scenarios:</strong>
                <ul>
                    <li>Single target failure: Traffic routes to other targets in same AZ</li>
                    <li>All targets in AZ failure: Behavior depends on Cross-Zone setting</li>
                    <li>AZ failure: Traffic in other AZs remains unaffected</li>
                </ul>
            </li>
        </ul>
    </div>


    <div class="container mt-5">
        <p style="color: blueviolet; font-size: 20px;"><strong>AWS Gateway Load Balancer (GWLB) Study Guide - Part 4</strong></p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Topic: Understanding Appliance and AZ Failure Scenarios</strong></p>
            
        <p style="color: #0066cc; font-size: 16px;"><strong>Introduction to the Problem</strong></p>
        <ul>
            <li><strong>Background:</strong>
                <ul>
                    <li>Security appliances (firewalls) can fail for various reasons</li>
                    <li>Entire Availability Zones can experience issues</li>
                    <li>Organizations need to understand how GWLB handles these failures</li>
                    <li>Unlike other AWS load balancers, GWLB handles failures differently due to its stateful nature</li>
                </ul>
            </li>
            <li><strong>The Challenge:</strong>
                <ul>
                    <li>Example scenario:
                        <ul>
                            <li>10 firewalls handling traffic, one fails</li>
                            <li>Existing connections through failed firewall need handling</li>
                            <li>New connections need proper distribution</li>
                            <li>Result: 10% of traffic is impacted for up to 70 seconds</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>Why This Is Important:</strong>
                <ul>
                    <li>Application availability depends on proper failure handling</li>
                    <li>Different failure types require different recovery approaches</li>
                    <li>Recovery time impacts user experience</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Key Concepts</strong></p>
        <ul>
            <li><strong>Types of Failures:</strong>
                <ul>
                    <li>Single firewall failure in an AZ</li>
                    <li>All firewalls failing in an AZ</li>
                    <li>Complete AZ failure</li>
                </ul>
            </li>
            <li><strong>Recovery Timings:</strong>
                <ul>
                    <li>Health check interval: Minimum 10 seconds</li>
                    <li>Minimum threshold: 2 checks</li>
                    <li>Backend detection time: 50-60 seconds</li>
                    <li>Total time to reroute: Up to 70 seconds</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Important Points to Remember</strong></p>
        <ul>
            <li><strong>Existing Flow Behavior:</strong>
                <ul>
                    <li>GWLB operates in fail-open mode</li>
                    <li>Existing flows stay mapped to failed target until timeout</li>
                    <li>No immediate termination or reset signal sent</li>
                </ul>
            </li>
            <li><strong>New Flow Behavior:</strong>
                <ul>
                    <li>After target is marked unhealthy, new flows wait up to 70 seconds before rerouting</li>
                    <li>Distribution depends on cross-zone load balancing setting</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Failure Scenarios and Outcomes</strong></p>
        <ul>
            <li><strong>Single Firewall Failure (Cross-Zone Disabled):</strong>
                <ul>
                    <li>Existing flows: Continue until timeout</li>
                    <li>New flows: Route to healthy targets in same AZ</li>
                </ul>
            </li>
            <li><strong>Single Firewall Failure (Cross-Zone Enabled):</strong>
                <ul>
                    <li>Existing flows: Continue until timeout</li>
                    <li>New flows: Route to any healthy target in any AZ</li>
                </ul>
            </li>
            <li><strong>All Firewalls in AZ Failure (Cross-Zone Disabled):</strong>
                <ul>
                    <li>Existing flows: Dropped until target restoration</li>
                    <li>New flows: Dropped until target restoration</li>
                </ul>
            </li>
            <li><strong>All Firewalls in AZ Failure (Cross-Zone Enabled):</strong>
                <ul>
                    <li>Existing flows: Continue until timeout</li>
                    <li>New flows: Route to healthy targets in other AZs</li>
                </ul>
            </li>
            <li><strong>AZ Failure:</strong>
                <ul>
                    <li>Flows in other AZs: Continue unaffected</li>
                    <li>GWLB endpoints in other AZs: Continue operating normally</li>
                </ul>
            </li>
        </ul>
        <table border="1" cellspacing="0" cellpadding="8" style="width:100%; border-collapse: collapse;font-size: 10px;">
            <thead>
                <tr style="background-color: #f2f2f2;">
                    <th>Failure scenario</th>
                    <th>Cross-zone Load balancing</th>
                    <th>Existing flows</th>
                    <th>New flows</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>One of the FW fails in the AZ</td>
                    <td>Disabled</td>
                    <td>Timeout or need reset from client</td>
                    <td>Sent to healthy targets in the same AZ</td>
                </tr>
                <tr>
                    <td>One of the FW fails in the AZ</td>
                    <td>Enabled</td>
                    <td>Timeout or need reset from client</td>
                    <td>Sent to healthy targets in the same or across AZs</td>
                </tr>
                <tr>
                    <td>All of the FWs fail in the AZ</td>
                    <td>Disabled</td>
                    <td>Timeout or dropped until at least one target is restored</td>
                    <td>Timeout or dropped until at least one target is restored</td>
                </tr>
                <tr>
                    <td>All of the FWs fail in the AZ</td>
                    <td>Enabled</td>
                    <td>Timeout or need reset from client</td>
                    <td>Sent to healthy targets across AZs</td>
                </tr>
                <tr>
                    <td>One of the AZ fails in an AWS Region</td>
                    <td>Disabled or Enabled</td>
                    <td>Flows going through other AZs are not impacted</td>
                    <td>Flows going through other AZs are not impacted</td>
                </tr>
            </tbody>
        </table>
        <p>Table: The table above summarizes various failure scenarios with existing and new flows on an GWLB</p>
        
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Exam Tips</strong></p>
        <ul>
            <li><strong>Recovery Times:</strong>
                <ul>
                    <li>Know the 70-second maximum rerouting time</li>
                    <li>Understand components: health checks (20s) + backend detection (50s)</li>
                </ul>
            </li>
            <li><strong>Impact Assessment:</strong>
                <ul>
                    <li>Single firewall failure impact = 1/(total firewalls) of traffic</li>
                    <li>Cross-zone setting critically affects recovery options</li>
                    <li>AZ failures don't impact other AZs' operations</li>
                </ul>
            </li>
            <li><strong>Behavior Differences:</strong>
                <ul>
                    <li>GWLB: Fail-open with no immediate termination</li>
                    <li>Other load balancers (ALB/NLB): Send reset signals</li>
                </ul>
            </li>
        </ul>
    </div>

    <div class="container mt-5">
        <p style="color: blueviolet; font-size: 20px;"><strong>AWS Gateway Load Balancer (GWLB) Study Guide - Part 5</strong></p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Topic: One-Arm vs Two-Arm Firewall Deployment for Egress Traffic</strong></p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Introduction to the Problem</strong></p>
        <ul>
            <li><strong>Background:</strong>
                <ul>
                    <li>Organizations need to inspect outbound traffic to the internet</li>
                    <li>Traffic requires both inspection and NAT (Network Address Translation)</li>
                    <li>These functions can be handled by different components or combined</li>
                </ul>
            </li>
            <li><strong>The Challenge:</strong>
                <ul>
                    <li>Example scenario:
                        <ul>
                            <li>EC2 instances need to access internet resources</li>
                            <li>Traffic needs security inspection</li>
                            <li>Private IPs need translation to public IPs</li>
                            <li>Decision: Should firewall handle both inspection and NAT, or just inspection?</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>Available Solutions:</strong>
                <ul>
                    <li>One-Arm Mode: Firewall inspects, NAT Gateway handles translation</li>
                    <li>Two-Arm Mode: Firewall handles both inspection and NAT</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Key Concepts</strong></p>
        <ul>
            <li><strong>One-Arm Mode:</strong>
                <ul>
                    <li>Firewall has single network interface</li>
                    <li>Firewall only performs inspection</li>
                    <li>AWS NAT Gateway handles address translation</li>
                    <li>Most common deployment method</li>
                </ul>
            </li>
            <li><strong>Two-Arm Mode:</strong>
                <ul>
                    <li>Firewall has two network interfaces</li>
                    <li>One interface in private subnet</li>
                    <li>One interface in public subnet</li>
                    <li>Firewall handles both inspection and NAT</li>
                </ul>
            </li>
        </ul>

        <table cellpadding="0" cellspacing="0" style="width: 100%;margin:0px;padding:0px;">
            <tr style="vertical-align: top; font-size: 11px; background-color: lightcyan">
                <td style="width:50%;">The firewall is deployed in one-arm mode just for traffic inspection whereas NAT Gateway performs translation. This is the most common deployment method, and eliminates dependency on firewall supporting NAT functionality. Also, it increases performance of the firewall by offloading NAT to NAT Gateway.
                </td>
                <td style="width:50%;">The firewall is deployed in two-arm mode and performs both inspection as well as NAT. Some AWS partners provide firewall with NAT functionality. GWLB integrates seamlessly in such deployment mode. You don’t need to do any additional configuration changes in the GWLB. However, the firewall networking differs – <font color="red">one network interface is on the private subnet and the other is on public subnet</font>. This mode requires software support from the firewall partner. Some of the GWLB partners (Palo Alto Networks, Valtix) support this feature, however consult with an AWS partner of your choice before using this mode.</td>
            </tr>
            <tr style="vertical-align: top; font-size: 11px;">
                <td style="width:50%;">
                <figure>
                    <img src="img/aws-glb-nat-one-arm.png" style="width:100%;border: 2px solid lightcoral;" alt="AWS Global Timeout Settings"/>
                    <figcaption style="width:100%;text-align: center; font-size: 14px; color: gray;">Figure: One-arm firewall deployment – The firewalls are just for traffic inspection whereas NAT Gateway is performing translation.</figcaption>
                </figure>
                </td>
                <td style="width:50%;">
                <figure>
                    <img src="img/aws-glb-nat-two-arm.png" style="width:98%;border: 2px solid lightcoral;" alt="AWS Global Timeout Settings"/>
                    <figcaption style="width:100%;text-align: center; font-size: 14px; color: gray;">Figure: Two-arm FW deployment – The firewalls (in two-arm mode) perform both inspection and translation.</figcaption>
                </figure>
                </td>
            </tr>
        </table>


        <p style="color: #0066cc; font-size: 16px;"><strong>Important Points to Remember</strong></p>
        <ul>
            <li><strong>One-Arm Benefits:</strong>
                <ul>
                    <li>Simpler configuration</li>
                    <li>Better firewall performance (NAT offloaded)</li>
                    <li>No dependency on firewall NAT capabilities</li>
                    <li>Uses standard AWS NAT Gateway features</li>
                </ul>
            </li>
            <li><strong>Two-Arm Considerations:</strong>
                <ul>
                    <li>Requires firewall vendor NAT support</li>
                    <li>More complex network configuration</li>
                    <li>Firewall handles additional NAT workload</li>
                    <li>Supported by specific partners (e.g., Palo Alto Networks, Valtix)</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Best Practices</strong></p>
        <ul>
            <li><strong>When to Choose One-Arm:</strong>
                <ul>
                    <li>When simplicity is priority</li>
                    <li>When using standard AWS NAT features is sufficient</li>
                    <li>When optimizing firewall performance</li>
                    <li>When firewall NAT capability isn't needed</li>
                </ul>
            </li>
            <li><strong>When to Choose Two-Arm:</strong>
                <ul>
                    <li>When advanced NAT features from firewall are needed</li>
                    <li>When using supported firewall vendors with NAT capabilities</li>
                    <li>When consolidated management of inspection and NAT is preferred</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Exam Tips</strong></p>
        <ul>
            <li><strong>Architecture Differences:</strong>
                <ul>
                    <li>One-Arm: Single interface, separate NAT Gateway</li>
                    <li>Two-Arm: Dual interfaces, integrated NAT</li>
                </ul>
            </li>
            <li><strong>Key Decision Factors:</strong>
                <ul>
                    <li>Simplicity vs. Advanced NAT features</li>
                    <li>Firewall vendor capabilities</li>
                    <li>Performance requirements</li>
                    <li>Management preferences</li>
                </ul>
            </li>
            <li><strong>Implementation Notes:</strong>
                <ul>
                    <li>No special GWLB configuration needed for either mode</li>
                    <li>Vendor support verification needed for two-arm mode</li>
                    <li>Consider NAT Gateway costs vs. firewall NAT licensing</li>
                </ul>
            </li>
        </ul>
    </div>

    <div class="container mt-5">
        <p style="color: blueviolet; font-size: 20px;"><strong>AWS Gateway Load Balancer (GWLB) Study Guide - Part 6</strong></p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Topic: One-Arm vs Two-Arm Firewall Deployment for SSL/TLS Inspection</strong></p>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Introduction to the Problem</strong></p>
        <ul>
            <li><strong>Background:</strong>
                <ul>
                    <li>Most modern traffic is encrypted using SSL/TLS</li>
                    <li>Security teams need to inspect encrypted traffic for threats</li>
                    <li>GWLB is transparent and doesn't handle SSL/TLS termination</li>
                    <li>Firewalls must perform decryption for deep packet inspection</li>
                </ul>
            </li>
            <li><strong>The Challenge:</strong>
                <ul>
                    <li>Example scenario:
                        <ul>
                            <li>HTTPS traffic needs inspection for security threats</li>
                            <li>Traffic must be decrypted, inspected, then re-encrypted</li>
                            <li>Original connection parameters may or may not need preservation</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><strong>Available Solutions:</strong>
                <ul>
                    <li>One-Arm Mode: Preserve original connection parameters</li>
                    <li>Two-Arm Mode: Allow connection parameter changes</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Key Concepts</strong></p>
        <ul>
            <li><strong>One-Arm SSL/TLS Mode:</strong>
                <ul>
                    <li>Single network interface on firewall</li>
                    <li>Maintains original 5-tuple (source/destination IP, ports, protocol)</li>
                    <li>Decrypt → Inspect → Re-encrypt with same parameters</li>
                </ul>
            </li>
            <li><strong>Two-Arm SSL/TLS Mode:</strong>
                <ul>
                    <li>Two network interfaces on firewall</li>
                    <li>Can modify connection parameters</li>
                    <li>Flows on each arm can have different 5-tuples</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Important Points to Remember</strong></p>
        <ul>
            <li><strong>GWLB's Role:</strong>
                <ul>
                    <li>Acts as transparent bump-in-the-wire</li>
                    <li>Does not terminate SSL/TLS</li>
                    <li>Does not perform SSL offloading</li>
                    <li>Passes encrypted traffic to firewall</li>
                </ul>
            </li>
            <li><strong>Firewall Requirements:</strong>
                <ul>
                    <li>Must support SSL/TLS decryption</li>
                    <li>Must handle certificate management</li>
                    <li>Must perform deep packet inspection</li>
                </ul>
            </li>
        </ul>


        <table cellpadding="0" cellspacing="0" style="width: 100%;margin:0px;padding:0px;">
            <tr style="vertical-align: top; font-size: 11px; background-color: lightcyan">
                <td style="width:50%;">The firewall is deployed in one-arm mode and GWLB passes through encrypted traffic. During the packet inspection process, the firewall decrypts and re-encrypts without changing the original 5-tuple (source/destination IP, source/destination port and protocol).
                </td>
                <td style="width:50%;">The firewall is deployed in two-arm mode. The traffic enters firewall encrypted, which then gets decrypted and inspected before being sent to Internet or vice-versa. In this mode, the 5-tuple of two flows on the two arms of the firewalls do not have to match. Some of the GWLB partners that support this feature are Check Point, Palo Alto Networks, and Trend Micro. However, consult with an AWS partner of your choice before using this mode.</td>
            </tr>
            <tr style="vertical-align: top; font-size: 11px;">
                <td style="width:50%;">
                <figure>
                    <img src="img/aws-glb-ssl-one-arm.png" style="width:100%;border: 2px solid lightcoral;" alt="AWS Global Timeout Settings"/>
                    <figcaption style="width:100%;text-align: center; font-size: 14px; color: gray;">Figure: The firewall, in one-arm mode, decrypts and re-encrypts before sending traffic out to Internet and vice-versa.</figcaption>
                </figure>
                </td>
                <td style="width:50%;">
                <figure>
                    <img src="img/aws-glb-ssl-two-arm.png" style="width:100%;border: 2px solid lightcoral;" alt="AWS Global Timeout Settings"/>
                    <figcaption style="width:100%;text-align: center; font-size: 14px; color: gray;">Figure: The firewall, in two-arm mode, decrypts and encrypts before sending traffic out to Internet and vice-versa.</figcaption>
                </figure>
                </td>
            </tr>
        </table>

        <p style="color: #0066cc; font-size: 16px;"><strong>Best Practices</strong></p>
        <ul>
            <li><strong>When to Choose One-Arm:</strong>
                <ul>
                    <li>When original connection parameters must be preserved</li>
                    <li>When simpler network architecture is preferred</li>
                    <li>When tracking original flow information is important</li>
                </ul>
            </li>
            <li><strong>When to Choose Two-Arm:</strong>
                <ul>
                    <li>When connection parameters can be modified</li>
                    <li>When using supported vendors (Check Point, Palo Alto Networks, Trend Micro)</li>
                    <li>When more flexible SSL/TLS handling is needed</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Vendor Support</strong></p>
        <ul>
            <li><strong>Two-Arm Mode Support:</strong>
                <ul>
                    <li>Check Point</li>
                    <li>Palo Alto Networks</li>
                    <li>Trend Micro</li>
                    <li>Verify with vendor for specific capabilities</li>
                </ul>
            </li>
        </ul>
    
        <p style="color: #0066cc; font-size: 16px;"><strong>Exam Tips</strong></p>
        <ul>
            <li><strong>Key Differences:</strong>
                <ul>
                    <li>One-Arm: Preserves connection parameters</li>
                    <li>Two-Arm: Allows parameter modification</li>
                    <li>GWLB: Always transparent, never terminates SSL</li>
                </ul>
            </li>
            <li><strong>Architecture Considerations:</strong>
                <ul>
                    <li>Understand GWLB's passive role in SSL/TLS handling</li>
                    <li>Know which vendors support two-arm mode</li>
                    <li>Remember impact on connection tracking</li>
                </ul>
            </li>
            <li><strong>Implementation Notes:</strong>
                <ul>
                    <li>Firewall must handle all SSL/TLS operations</li>
                    <li>Certificate management happens at firewall level</li>
                    <li>Consider compliance requirements for SSL/TLS inspection</li>
                </ul>
            </li>
        </ul>
    </div>

	
	
	

</body>
